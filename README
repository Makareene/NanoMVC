# NanoMVC

> A modernized, PHP 8.3+ compatible fork of [TinyMVC](https://github.com/mohrt/tinymvc-php) — minimal, fast, and extensible.

---

## 🔧 What is NanoMVC?

NanoMVC is a cleaned-up fork of the original TinyMVC framework, reworked to support PHP 8.4+ while preserving its lightweight nature and architecture.

It is **not a rewrite**, but a carefully maintained continuation with compatibility and minimalism in mind.

### Goals:
- ✅ Update deprecated PHP syntax and features
- ✅ Make the framework work flawlessly on PHP 8.3+
- ✅ Preserve the original architecture and simplicity
- ✅ Add modern enhancements without breaking backwards compatibility

---

## 🚀 What’s New in 1.0.3

- 🔹 Overhauled error handler:
  - Support for defining a custom error handler class via config
  - Errors now use customizable view templates instead of hardcoded HTML
  - HTTP error codes now automatically send proper headers
  - Special view added for 404 errors
  - Supported status codes:
    400 → Bad Request
    401 → Unauthorized
    403 → Forbidden
    404 → Not Found
    405 → Method Not Allowed
    408 → Request Timeout
    410 → Gone
    429 → Too Many Requests
    500 → Internal Server Error
    501 → Not Implemented
    502 → Bad Gateway
    503 → Service Unavailable
    504 → Gateway Timeout
  - Error display now respects `error_reporting()` and `display_errors`
  - Missing controllers or methods now trigger a 404 response
  - Default code is 500 if none specified

- 🔹 Plugin `NanoMVC_Library_URI`:
  - Fixed and improved
  - Added `uri()` method to get the remaining URI tail as string

- 🔹 Plugin `NanoMVC_Script_Helper`:
  - Added `send_headers()` for structured header sending
  - Added `esc_html()` for safe HTML escaping

- 🔹 Plugin `NanoMVC_Library_BlogMenu`:
  - Create simple blogs using only controllers and methods with metadata
  - No database or external storage required — content lives in code

- 🔹 Other small improvements and internal cleanup

---

## 🚀 What’s New in 1.0.4

- 🔹 Core updates: Controllers now get optional `$controller_name` and `$action_name` in constructors; exceptions include error codes; HTTP 410 uses the 404 view; error code `0` bypasses `error_reporting` checks.

- 🔹 Plugin improvements: `NanoMVC_Library_BlogMenu` adds optional params to `get_articles()` and a `pagination()` method; `NanoMVC_Library_URI` adds `parse_query_string()`; `NanoMVC_Script_Helper` adds `view()` for rendering views and `is_int_like()` for integer string checks.

- 🔹 Other enhancements: Better error reporting in views and consistent string escaping in system error views using `NanoMVC_Script_Helper::esc_html`.

---

## 🚀 What’s New in 1.0.5

- 🔹 Core:
  - PDO: Added support for null parameters in WHERE clauses, generating WHERE param IS NULL when needed.
  - Fixed a bug in the declaration of is_int_like(), made it a static method.
  - Introduced is_ajax_json GET flag and new json_view for error handling. When is_ajax_json is present, json_view is used and the header Content-Type: application/json is sent. Integrated into core error handler.
  - Removed htmlspecialchars from JSON error view to ensure valid JSON output.

- 🔹 Other improvements:
  - Minor fixes related to error handling and JSON responses.

---

🧾 Full changelog is available in [NEWS](./NEWS)

---

## 📚 Documentation & Website

📖 [https://nanomvc.nipaa.fyi](https://nanomvc.nipaa.fyi)

---

## 🐘 Requirements

- PHP 8.3 or later
- PDO extension enabled

---

## 🧱 Based On

> **TinyMVC**
> Author: Monte Ohrt
> Website: [tinymvc.com](http://www.tinymvc.com)
> Repo: [github.com/mohrt/tinymvc-php](https://github.com/mohrt/tinymvc-php)

---

## 📄 License

Licensed under the LGPL v2.1 or later
Original code © 2007 by Monte Ohrt
NanoMVC modifications © 2025 by Nipaa

---

## 📌 Project Status

NanoMVC is an active fork with modern PHP support.
It will stay close to TinyMVC’s original goals while adding clean, opt-in improvements.
